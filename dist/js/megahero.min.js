!function(e){return e?void(e.fn.megahero=function(t){var i=this,n=e(window),o=e.extend({backgroundPosition:"center center",container:i.parent(),dynamicHeight:!0,threshold:120,height:.7},t);i.collection=[];var r={className:"megahero-hero-panel",count:i.length,dataName:"megahero",windowWidth:document.body.clientWidth};i.now=Date.now||function(){return(new Date).getTime()},i.debounce=function(e,t,n){var o,r,a,d,h,c=function(){var s=i.now()-d;t>s&&s>0?o=setTimeout(c,t-s):(o=null,n||(h=e.apply(a,r),a=r=null))};return function(){a=this,r=arguments,d=i.now();var s=n&&!o;return o||(o=setTimeout(c,t)),s&&(h=e.apply(a,r),a=r=null),h}},i.addToCollection=function(e){return e?(i.collection.push(e),void(i.collection.length>=r.count&&(i.updateWindowWidth(),i.resizeHeros()))):!1},i.updateWindowWidth=function(e){return"number"!=typeof e&&(e=document.body.clientWidth),r.windowWidth=e,i};var a=function(t){return t&&"object"==typeof t?(this.el=t,this.$el=e(t),this.initialize(),this):!1};return a.prototype.initialize=function(){var e=document.body.clientWidth;return this.el.classList.add(r.className),this.createPlaceholder(),i.addToCollection(this),e===r.windowWidth?this.resize():(i.updateWindowWidth(e),i.resizeHeros()),this.render(),this},a.prototype.verifyWidth=function(e){return e&&"number"==typeof e?e!==r.windowWidth?(i.updateWindowWidth(e),i.resizeHeros(),!1):!0:void 0},a.prototype.createPlaceholder=function(){var t,i,n=this.$el;return t=document.createElement("div"),t.classList.add("megahero-placeholder"),i=e(t),i.insertBefore(n),this.$placeholder=i,this},a.prototype.parseHeight=function(){var e=this.el.getAttribute("data-megahero-height"),t=n.height();return e||(e=o.height),"number"==typeof e?Math.round(t*e):e.indexOf("px")>=0?e:(e.indexOf("%")>=0&&(e=parseFloat(e.replace("%",""))/100),"string"==typeof e&&(e=parseFloat(e)),Math.round(t*e))},a.prototype.render=function(){return this.renderImage(),this.renderDim(),this},a.prototype.renderDim=function(){var e=this.el,t=e.getAttribute("data-megahero-dim");return t?void 0:!1},a.prototype.renderImage=function(){var t=this.el,i=t.getAttribute("data-megahero-image");return i?(e("div:after").css("content","22"),t.style.backgroundImage="url("+i+")",t.style.webkitBackgroundSize="cover",t.style.mozBackgroundSize="cover",t.style.OBackgroundSize="cover",t.style.backgroundSize="cover",void(t.style.backgroundPosition=o.backgroundPosition)):this},a.prototype.resize=function(){var e=document.body.clientWidth,t=this,i=this.$el,n=this.$placeholder;if(!t.verifyWidth(e))return this;if(!i||!n)return!1;var a=this.$placeholder.offset().left;return i.css("marginLeft",-Math.round(a)),i.width(r.windowWidth),i.css(r.heightAttr,t.parseHeight()),o.dynamicHeight||i.css("overflow","hidden"),this},i.resizeHeros=function(){i.updateWindowWidth();for(var e=0,t=i.collection.length;t>e;e++)i.collection[e].resize();return i},i.initialize=function(){o.container=e(o.container),r.heightAttr=o.dynamicHeight?"min-height":"height",o.container.css("overflow","visible")},i.debouncedResize=i.debounce(i.resizeHeros,o.threshold),n.on("resize",i.debouncedResize),n.bind("orientationchange",i.debouncedResize),i.initialize(),this.each(function(){var t=e(this);if(!t.data(r.dataName)){var i=new a(this);t.data(r.dataName,i)}})}):!1}(jQuery);