!function(e){return e?void(e.fn.megahero=function(t){var i=this,n=e(window),r=e.extend({backgroundPosition:"center center",container:i.parent(),dynamicHeight:!0,threshold:120,height:.7},t);i.collection=[];var o={count:i.length,dataName:"megahero",windowWidth:document.body.clientWidth},a={content:"megahero-content",cover:"megahero-cover",main:"megahero",panel:"megahero-hero-panel"};i.now=Date.now||function(){return(new Date).getTime()},i.debounce=function(e,t,n){var r,o,a,d,h,s=function(){var c=i.now()-d;t>c&&c>0?r=setTimeout(s,t-c):(r=null,n||(h=e.apply(a,o),a=o=null))};return function(){a=this,o=arguments,d=i.now();var c=n&&!r;return r||(r=setTimeout(s,t)),c&&(h=e.apply(a,o),a=o=null),h}},i.addToCollection=function(e){return e?(i.collection.push(e),void(i.collection.length>=o.count&&(i.updateWindowWidth(),i.resizeHeros()))):!1},i.updateWindowWidth=function(e){return"number"!=typeof e&&(e=document.body.clientWidth),o.windowWidth=e,i};var d=function(t){return t&&"object"==typeof t?(this.el=t,this.$el=e(t),this.initialize(),this):!1};return d.prototype.initialize=function(){var e=document.body.clientWidth,t=this.el;return t.classList.add(a.panel),t.classList.contains(a.main)||t.classList.add(a.main),this.createPlaceholder(),i.addToCollection(this),e===o.windowWidth?this.resize():(i.updateWindowWidth(e),i.resizeHeros()),this.render(),this},d.prototype.verifyWidth=function(e){return e&&"number"==typeof e?e!==o.windowWidth?(i.updateWindowWidth(e),i.resizeHeros(),!1):!0:void 0},d.prototype.createPlaceholder=function(){var t,i,n=this.$el;return t=document.createElement("div"),t.classList.add("megahero-placeholder"),i=e(t),i.insertBefore(n),this.$placeholder=i,this},d.prototype.parseHeight=function(){var e=this.el.getAttribute("data-megahero-height"),t=n.height();return e||(e=r.height),"number"==typeof e?Math.round(t*e):e.indexOf("px")>=0?e:(e.indexOf("%")>=0&&(e=parseFloat(e.replace("%",""))/100),"string"==typeof e&&(e=parseFloat(e)),Math.round(t*e))},d.prototype.render=function(){return this.renderContent(),this.renderImage(),this.renderDim(),this},d.prototype.renderContent=function(){var e=this.$el;return e.children().wrapAll('<div class="'+a.content+'"></div>'),this},d.prototype.renderDim=function(){var e=this.el,t=e.getAttribute("data-megahero-dim");return t?(e.classList.add("dim"),this):!1},d.prototype.renderImage=function(){var e,t=this.el,i=t.getAttribute("data-megahero-image");return i?(e=document.createElement("div"),e.classList.add(a.cover),e.style.backgroundImage="url('"+i+"')",t.appendChild(e),this):this},d.prototype.resize=function(){var e=document.body.clientWidth,t=this,i=this.$el,n=this.$placeholder;if(!t.verifyWidth(e))return this;if(!i||!n)return!1;var a=this.$placeholder.offset().left;return i.css("marginLeft",-Math.round(a)),i.width(o.windowWidth),i.css(o.heightAttr,t.parseHeight()),r.dynamicHeight||i.css("overflow","hidden"),this},i.resizeHeros=function(){i.updateWindowWidth();for(var e=0,t=i.collection.length;t>e;e++)i.collection[e].resize();return i},i.initialize=function(){r.container=e(r.container),o.heightAttr=r.dynamicHeight?"min-height":"height",r.container.css("overflow","visible")},i.debouncedResize=i.debounce(i.resizeHeros,r.threshold),n.on("resize",i.debouncedResize),n.bind("orientationchange",i.debouncedResize),i.initialize(),this.each(function(){var t=e(this);if(!t.data(o.dataName)){var i=new d(this);t.data(o.dataName,i)}})}):!1}(jQuery);